"""Fix buyer_id foreign key to use UUID string

Revision ID: 69f3069781fc
Revises: 641172eac6b5
Create Date: 2025-09-19 14:42:52.262984+00:00

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import sqlite

# revision identifiers, used by Alembic.
revision: str = '69f3069781fc'
down_revision: Union[str, Sequence[str], None] = '641172eac6b5'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.alter_column('admin_activity_logs', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'admin_user_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'admin_email',
               existing_type=sa.VARCHAR(length=255),
               type_=sa.String(length=255),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'admin_full_name',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'action_type',
               existing_type=sa.VARCHAR(length=17),
               type_=sa.Enum('AUTHENTICATION', 'USER_MANAGEMENT', 'VENDOR_MANAGEMENT', 'FINANCIAL', 'SYSTEM_CONFIG', 'DATA_EXPORT', 'SECURITY', 'AUDIT', 'MONITORING', 'EMERGENCY', name='adminactiontype'),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'action_name',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'action_description',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'target_type',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'target_id',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'target_identifier',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'result',
               existing_type=sa.VARCHAR(length=9),
               type_=sa.Enum('SUCCESS', 'FAILURE', 'PARTIAL', 'BLOCKED', 'PENDING', 'CANCELLED', 'TIMEOUT', name='actionresult'),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'risk_level',
               existing_type=sa.VARCHAR(length=9),
               type_=sa.Enum('LOW', 'MEDIUM', 'HIGH', 'CRITICAL', 'EMERGENCY', name='risklevel'),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'endpoint',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'http_method',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.String(length=10),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'request_data',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'response_data',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'ip_address',
               existing_type=sa.VARCHAR(length=45),
               type_=sa.String(length=45),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'user_agent',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'session_id',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'device_fingerprint',
               existing_type=sa.VARCHAR(length=255),
               type_=sa.String(length=255),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'country_code',
               existing_type=sa.VARCHAR(length=2),
               type_=sa.String(length=2),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'region',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'city',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'timezone',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'execution_time_ms',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'cpu_usage_percent',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'memory_usage_mb',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'error_code',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'error_message',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'error_stack_trace',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'requires_review',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'is_suspicious',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'compliance_tags',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'retention_policy',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'tags',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'custom_fields',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'correlation_id',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'alert_sent',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'alert_level',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('admin_permissions', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'name',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'display_name',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'description',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('admin_permissions', 'resource_type',
               existing_type=sa.VARCHAR(length=13),
               type_=sa.Enum('USERS', 'VENDORS', 'ORDERS', 'PRODUCTS', 'INVENTORY', 'TRANSACTIONS', 'COMMISSIONS', 'REPORTS', 'SETTINGS', 'AUDIT_LOGS', 'NOTIFICATIONS', 'PAYMENTS', 'STORAGE', 'ANALYTICS', name='resourcetype'),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'action',
               existing_type=sa.VARCHAR(length=9),
               type_=sa.Enum('CREATE', 'READ', 'UPDATE', 'DELETE', 'APPROVE', 'REJECT', 'MANAGE', 'AUDIT', 'EXPORT', 'IMPORT', 'CONFIGURE', 'MONITOR', name='permissionaction'),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'scope',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Enum('SYSTEM', 'GLOBAL', 'DEPARTMENT', 'TEAM', 'USER', 'READ_ONLY', name='permissionscope'),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'required_clearance_level',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'requires_mfa',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'requires_approval',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'is_system_permission',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'is_inheritable',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'is_delegatable',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'conditions',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('admin_permissions', 'restrictions',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('admin_permissions', 'category',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('admin_permissions', 'tags',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('admin_permissions', 'risk_level',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'compliance_requirements',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('admin_permissions', 'audit_required',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('admin_user_permissions', 'user_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('admin_user_permissions', 'permission_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('admin_user_permissions', 'granted_by_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('admin_user_permissions', 'granted_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('admin_user_permissions', 'expires_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('admin_user_permissions', 'is_active',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('categories', 'name',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=False)
    op.alter_column('categories', 'slug',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=False)
    op.alter_column('categories', 'description',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('categories', 'parent_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('categories', 'path',
               existing_type=sa.VARCHAR(length=1000),
               type_=sa.String(length=1000),
               existing_nullable=False)
    op.alter_column('categories', 'level',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('categories', 'sort_order',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('categories', 'is_active',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('categories', 'status',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=False)
    op.alter_column('categories', 'meta_title',
               existing_type=sa.VARCHAR(length=255),
               type_=sa.String(length=255),
               existing_nullable=True)
    op.alter_column('categories', 'meta_description',
               existing_type=sa.VARCHAR(length=500),
               type_=sa.String(length=500),
               existing_nullable=True)
    op.alter_column('categories', 'meta_keywords',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('categories', 'icon_url',
               existing_type=sa.VARCHAR(length=500),
               type_=sa.String(length=500),
               existing_nullable=True)
    op.alter_column('categories', 'banner_url',
               existing_type=sa.VARCHAR(length=500),
               type_=sa.String(length=500),
               existing_nullable=True)
    op.alter_column('categories', 'display_config',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('categories', 'product_count',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('categories', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('categories', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('categories', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('categories', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('commission_disputes', 'transaction_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'usuario_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'motivo',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'descripcion',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'estado',
               existing_type=sa.VARCHAR(length=11),
               type_=sa.Enum('ABIERTO', 'EN_REVISION', 'RESUELTO', 'RECHAZADO', name='estadodispute'),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'respuesta_admin',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('commission_disputes', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('commissions', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('commissions', 'commission_number',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=False)
    op.alter_column('commissions', 'order_id',
               existing_type=sa.INTEGER(),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('commissions', 'vendor_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('commissions', 'transaction_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('commissions', 'order_amount',
               existing_type=sa.DECIMAL(precision=10, scale=2),
               type_=sa.DECIMAL(precision=10, scale=2),
               existing_nullable=False)
    op.alter_column('commissions', 'commission_rate',
               existing_type=sa.DECIMAL(precision=5, scale=4),
               type_=sa.DECIMAL(precision=5, scale=4),
               existing_nullable=False)
    op.alter_column('commissions', 'commission_amount',
               existing_type=sa.DECIMAL(precision=10, scale=2),
               type_=sa.DECIMAL(precision=10, scale=2),
               existing_nullable=False)
    op.alter_column('commissions', 'vendor_amount',
               existing_type=sa.DECIMAL(precision=10, scale=2),
               type_=sa.DECIMAL(precision=10, scale=2),
               existing_nullable=False)
    op.alter_column('commissions', 'platform_amount',
               existing_type=sa.DECIMAL(precision=10, scale=2),
               type_=sa.DECIMAL(precision=10, scale=2),
               existing_nullable=False)
    op.alter_column('commissions', 'commission_type',
               existing_type=sa.VARCHAR(length=14),
               type_=sa.Enum('STANDARD', 'PREMIUM', 'PROMOTIONAL', 'CATEGORY_BASED', name='commissiontype'),
               existing_nullable=False)
    op.alter_column('commissions', 'status',
               existing_type=sa.VARCHAR(length=9),
               type_=sa.Enum('PENDING', 'APPROVED', 'PAID', 'DISPUTED', 'REFUNDED', 'CANCELLED', name='commissionstatus'),
               existing_nullable=False)
    op.alter_column('commissions', 'currency',
               existing_type=sa.VARCHAR(length=3),
               type_=sa.String(length=3),
               existing_nullable=False)
    op.alter_column('commissions', 'calculation_method',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('commissions', 'notes',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('commissions', 'admin_notes',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('commissions', 'calculated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=False)
    op.alter_column('commissions', 'approved_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('commissions', 'paid_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('commissions', 'disputed_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('commissions', 'resolved_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('commissions', 'approved_by_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('commissions', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('commissions', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('commissions', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'audit_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'report_type',
               existing_type=sa.VARCHAR(length=17),
               type_=sa.Enum('DISCREPANCIES', 'ADJUSTMENTS', 'ACCURACY', 'FINANCIAL_IMPACT', 'LOCATION_ANALYSIS', 'CATEGORY_ANALYSIS', 'TREND_ANALYSIS', 'COMPREHENSIVE', name='reporttype'),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'report_name',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'description',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'generated_by_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'generated_by_name',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'date_range_start',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'date_range_end',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'total_discrepancies',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'total_adjustments',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'financial_impact',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'accuracy_percentage',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'items_analyzed',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'file_path',
               existing_type=sa.VARCHAR(length=500),
               type_=sa.String(length=500),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'file_format',
               existing_type=sa.VARCHAR(length=5),
               type_=sa.Enum('PDF', 'EXCEL', 'CSV', 'JSON', name='exportformat'),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'file_size',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'status',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Enum('GENERATING', 'COMPLETED', 'FAILED', 'EXPIRED', name='reportstatus'),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'analysis_data',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'report_config',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'generation_time_seconds',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'expiry_date',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'download_count',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'notes',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'updated_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'completed_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('incidentes_inventario', 'inventory_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('incidentes_inventario', 'tipo_incidente',
               existing_type=sa.VARCHAR(length=7),
               type_=sa.Enum('PERDIDO', 'DAÑADO', name='tipoincidente'),
               existing_nullable=False)
    op.alter_column('incidentes_inventario', 'estado',
               existing_type=sa.VARCHAR(length=16),
               type_=sa.Enum('REPORTADO', 'EN_INVESTIGACION', 'RESUELTO', 'CERRADO', name='estadoincidente'),
               existing_nullable=True)
    op.alter_column('incidentes_inventario', 'descripcion',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=False)
    op.alter_column('incidentes_inventario', 'reportado_por',
               existing_type=sa.VARCHAR(),
               type_=sa.String(),
               existing_nullable=False)
    op.alter_column('incidentes_inventario', 'fecha_incidente',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('incidentes_inventario', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('incidentes_inventario', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('incidentes_inventario', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('incidentes_inventario', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'product_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'vendor_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'expected_arrival',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'actual_arrival',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'verification_status',
               existing_type=sa.VARCHAR(length=13),
               type_=sa.Enum('PENDING', 'ASSIGNED', 'IN_PROGRESS', 'QUALITY_CHECK', 'APPROVED', 'REJECTED', 'ON_HOLD', 'COMPLETED', name='verificationstatus'),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'priority',
               existing_type=sa.VARCHAR(length=9),
               type_=sa.Enum('LOW', 'NORMAL', 'HIGH', 'CRITICAL', 'EXPEDITED', name='queuepriority'),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'assigned_to',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'assigned_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'deadline',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'tracking_number',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'carrier',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'is_delayed',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'delay_reason',
               existing_type=sa.VARCHAR(length=14),
               type_=sa.Enum('TRANSPORT', 'CUSTOMS', 'DOCUMENTATION', 'VENDOR_DELAY', 'QUALITY_ISSUES', 'CAPACITY', 'OTHER', name='delayreason'),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'notes',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'verification_notes',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'quality_score',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'quality_issues',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'processing_started_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'processing_completed_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'verification_attempts',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('inventory', 'product_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('inventory', 'status',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Enum('DISPONIBLE', 'RESERVADO', 'EN_PICKING', 'DESPACHADO', name='inventorystatus'),
               existing_nullable=False)
    op.alter_column('inventory', 'condicion_producto',
               existing_type=sa.VARCHAR(length=15),
               type_=sa.Enum('NUEVO', 'USADO_EXCELENTE', 'USADO_BUENO', 'USADO_REGULAR', 'DAÑADO', name='condicionproducto'),
               existing_nullable=False)
    op.alter_column('inventory', 'notas_almacen',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('inventory', 'zona',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.String(length=10),
               existing_nullable=False)
    op.alter_column('inventory', 'estante',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=False)
    op.alter_column('inventory', 'posicion',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=False)
    op.alter_column('inventory', 'cantidad',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('inventory', 'cantidad_reservada',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('inventory', 'updated_by_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('inventory', 'storage_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('inventory', 'fecha_ingreso',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('inventory', 'fecha_ultimo_movimiento',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('inventory', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('inventory', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('inventory', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('inventory', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('inventory_audit_items', 'audit_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('inventory_audit_items', 'inventory_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('inventory_audit_items', 'cantidad_sistema',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('inventory_audit_items', 'ubicacion_sistema',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'condicion_sistema',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'cantidad_fisica',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'ubicacion_fisica',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'condicion_fisica',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'conteo_completado',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'tiene_discrepancia',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'tipo_discrepancia',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.Enum('FALTANTE', 'SOBRANTE', 'UBICACION_INCORRECTA', 'CONDICION_DIFERENTE', name='discrepancytype'),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'diferencia_cantidad',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'valor_discrepancia',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'fecha_conteo',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'notas_conteo',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'reconciliado',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('inventory_audits', 'nombre',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=False)
    op.alter_column('inventory_audits', 'descripcion',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'status',
               existing_type=sa.VARCHAR(length=12),
               type_=sa.Enum('INICIADA', 'EN_PROCESO', 'COMPLETADA', 'RECONCILIADA', name='auditstatus'),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'fecha_inicio',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'fecha_fin',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'auditor_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('inventory_audits', 'audit_type',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'discrepancies_found',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'total_items_auditados',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'discrepancias_encontradas',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'valor_discrepancias',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'notas',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'updated_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'movement_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'user_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'user_name',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'action_type',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'previous_data',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'new_data',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'ip_address',
               existing_type=sa.VARCHAR(length=45),
               type_=sa.String(length=45),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'user_agent',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'session_id',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'location_from',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'location_to',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'batch_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'notes',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'action_timestamp',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('movimientos_stock', 'inventory_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'tipo_movimiento',
               existing_type=sa.VARCHAR(length=15),
               type_=sa.Enum('INGRESO', 'SALIDA', 'AJUSTE_POSITIVO', 'AJUSTE_NEGATIVO', 'TRANSFERENCIA', 'DEVOLUCION', 'MERMA', 'RESERVA', 'LIBERACION', name='tipomovimiento'),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'cantidad_anterior',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'cantidad_nueva',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'user_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('movimientos_stock', 'observaciones',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('movimientos_stock', 'fecha_movimiento',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'referencia_externa',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('movimientos_stock', 'lote',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('movimientos_stock', 'ubicacion_origen',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('movimientos_stock', 'ubicacion_destino',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('movimientos_stock', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('order_items', 'id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('order_items', 'order_id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('order_items', 'product_id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('order_items', 'product_name',
               existing_type=sa.VARCHAR(length=500),
               type_=sa.String(length=500),
               existing_nullable=False)
    op.alter_column('order_items', 'product_sku',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('order_items', 'product_image_url',
               existing_type=sa.VARCHAR(length=1000),
               type_=sa.String(length=1000),
               existing_nullable=True)
    op.alter_column('order_items', 'unit_price',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=False)
    op.alter_column('order_items', 'quantity',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('order_items', 'total_price',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=False)
    op.alter_column('order_items', 'variant_attributes',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('order_items', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.drop_column('order_items', 'order_id_new')
    op.drop_column('order_items', 'id_new')
    op.drop_column('order_items', 'product_id_new')
    op.drop_column('order_items', 'vendor_id_new')
    op.alter_column('order_transactions', 'id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('order_transactions', 'transaction_reference',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('order_transactions', 'order_id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('order_transactions', 'amount',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=False)
    op.alter_column('order_transactions', 'currency',
               existing_type=sa.VARCHAR(length=3),
               type_=sa.String(length=3),
               existing_nullable=False)
    op.alter_column('order_transactions', 'status',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Enum('PENDING', 'PROCESSING', 'APPROVED', 'DECLINED', 'ERROR', 'CANCELLED', name='paymentstatus'),
               existing_nullable=False)
    op.alter_column('order_transactions', 'payment_method_type',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=False)
    op.alter_column('order_transactions', 'payment_method_id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('order_transactions', 'gateway',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=False)
    op.alter_column('order_transactions', 'gateway_transaction_id',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('order_transactions', 'gateway_reference',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('order_transactions', 'gateway_response',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('order_transactions', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('order_transactions', 'processed_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('order_transactions', 'confirmed_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('order_transactions', 'failure_reason',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('order_transactions', 'failure_code',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.drop_column('order_transactions', 'order_id_new')
    op.drop_column('order_transactions', 'payment_method_id_new')
    op.drop_column('order_transactions', 'id_new')
    op.alter_column('orders', 'id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('orders', 'order_number',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=False)
    op.alter_column('orders', 'buyer_id',
               existing_type=sa.INTEGER(),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('orders', 'subtotal',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=False)
    op.alter_column('orders', 'tax_amount',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=False)
    op.alter_column('orders', 'shipping_cost',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=False)
    op.alter_column('orders', 'discount_amount',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=False)
    op.alter_column('orders', 'total_amount',
               existing_type=sa.FLOAT(),
               type_=sa.Float(),
               existing_nullable=False)
    op.alter_column('orders', 'status',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Enum('PENDING', 'CONFIRMED', 'PROCESSING', 'SHIPPED', 'DELIVERED', 'CANCELLED', 'REFUNDED', name='orderstatus'),
               existing_nullable=False)
    op.alter_column('orders', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('orders', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('orders', 'confirmed_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('orders', 'shipped_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('orders', 'delivered_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('orders', 'shipping_name',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=False)
    op.alter_column('orders', 'shipping_phone',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=False)
    op.alter_column('orders', 'shipping_email',
               existing_type=sa.VARCHAR(length=255),
               type_=sa.String(length=255),
               existing_nullable=True)
    op.alter_column('orders', 'shipping_address',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=False)
    op.alter_column('orders', 'shipping_city',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('orders', 'shipping_state',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('orders', 'shipping_postal_code',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=True)
    op.alter_column('orders', 'shipping_country',
               existing_type=sa.VARCHAR(length=2),
               type_=sa.String(length=2),
               existing_nullable=False)
    op.alter_column('orders', 'notes',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.drop_column('orders', 'buyer_id_new')
    op.drop_column('orders', 'id_new')
    op.drop_column('orders', 'vendor_id_new')
    op.alter_column('payment_intents', 'id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('payment_intents', 'intent_reference',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('payment_intents', 'order_id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('payment_intents', 'amount_in_cents',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('payment_intents', 'currency',
               existing_type=sa.VARCHAR(length=3),
               type_=sa.String(length=3),
               existing_nullable=False)
    op.alter_column('payment_intents', 'customer_email',
               existing_type=sa.VARCHAR(length=320),
               type_=sa.String(length=320),
               existing_nullable=False)
    op.alter_column('payment_intents', 'billing_data',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('payment_intents', 'payment_method_types',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('payment_intents', 'redirect_url',
               existing_type=sa.VARCHAR(length=1000),
               type_=sa.String(length=1000),
               existing_nullable=True)
    op.alter_column('payment_intents', 'wompi_payment_link_id',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('payment_intents', 'wompi_checkout_url',
               existing_type=sa.VARCHAR(length=1000),
               type_=sa.String(length=1000),
               existing_nullable=True)
    op.alter_column('payment_intents', 'status',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=False)
    op.alter_column('payment_intents', 'expires_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('payment_intents', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('payment_intents', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('payment_intents', 'completed_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('payment_methods', 'id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('payment_methods', 'buyer_id',
               existing_type=sa.INTEGER(),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('payment_methods', 'method_type',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=False)
    op.alter_column('payment_methods', 'is_default',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=True)
    op.alter_column('payment_methods', 'is_active',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=True)
    op.alter_column('payment_methods', 'card_brand',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('payment_methods', 'card_last_four',
               existing_type=sa.VARCHAR(length=4),
               type_=sa.String(length=4),
               existing_nullable=True)
    op.alter_column('payment_methods', 'card_exp_month',
               existing_type=sa.VARCHAR(length=2),
               type_=sa.String(length=2),
               existing_nullable=True)
    op.alter_column('payment_methods', 'card_exp_year',
               existing_type=sa.VARCHAR(length=4),
               type_=sa.String(length=4),
               existing_nullable=True)
    op.alter_column('payment_methods', 'card_holder_name',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('payment_methods', 'pse_bank_code',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.String(length=10),
               existing_nullable=True)
    op.alter_column('payment_methods', 'pse_bank_name',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('payment_methods', 'pse_user_type',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=True)
    op.alter_column('payment_methods', 'pse_user_dni',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('payment_methods', 'gateway_token',
               existing_type=sa.VARCHAR(length=500),
               type_=sa.String(length=500),
               existing_nullable=True)
    op.alter_column('payment_methods', 'gateway_customer_id',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('payment_methods', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('payment_methods', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.drop_column('payment_methods', 'buyer_id_new')
    op.drop_column('payment_methods', 'id_new')
    op.alter_column('payment_refunds', 'id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('payment_refunds', 'refund_reference',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('payment_refunds', 'payment_id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('payment_refunds', 'transaction_id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('payment_refunds', 'refund_amount_in_cents',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('payment_refunds', 'currency',
               existing_type=sa.VARCHAR(length=3),
               type_=sa.String(length=3),
               existing_nullable=False)
    op.alter_column('payment_refunds', 'reason',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('payment_refunds', 'wompi_refund_id',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('payment_refunds', 'gateway_response',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('payment_refunds', 'status',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=False)
    op.alter_column('payment_refunds', 'status_message',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('payment_refunds', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('payment_refunds', 'processed_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('payment_refunds', 'completed_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('payments', 'id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('payments', 'payment_reference',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('payments', 'transaction_id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('payments', 'wompi_transaction_id',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('payments', 'wompi_payment_id',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('payments', 'amount_in_cents',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('payments', 'currency',
               existing_type=sa.VARCHAR(length=3),
               type_=sa.String(length=3),
               existing_nullable=False)
    op.alter_column('payments', 'payment_method_type',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=False)
    op.alter_column('payments', 'payment_method',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('payments', 'customer_email',
               existing_type=sa.VARCHAR(length=320),
               type_=sa.String(length=320),
               existing_nullable=True)
    op.alter_column('payments', 'customer_data',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('payments', 'status',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=False)
    op.alter_column('payments', 'status_message',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('payments', 'gateway_response',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('payments', 'gateway_created_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('payments', 'gateway_finalized_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('payments', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('payments', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('payout_history', 'id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('payout_history', 'payout_request_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('payout_history', 'estado_anterior',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('payout_history', 'estado_nuevo',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=False)
    op.alter_column('payout_history', 'fecha_cambio',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('payout_history', 'observaciones',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('payout_history', 'usuario_responsable',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('payout_history', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('payout_history', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('payout_history', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('payout_requests', 'vendedor_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('payout_requests', 'monto_solicitado',
               existing_type=sa.DECIMAL(precision=12, scale=2),
               type_=sa.DECIMAL(precision=12, scale=2),
               existing_nullable=False)
    op.alter_column('payout_requests', 'estado',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Enum('SOLICITADO', 'PROCESANDO', 'PAGADO', 'RECHAZADO', name='estadopayout'),
               existing_nullable=True)
    op.alter_column('payout_requests', 'tipo_cuenta',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=False)
    op.alter_column('payout_requests', 'numero_cuenta',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=False)
    op.alter_column('payout_requests', 'banco',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('payout_requests', 'observaciones',
               existing_type=sa.VARCHAR(length=500),
               type_=sa.String(length=500),
               existing_nullable=True)
    op.alter_column('payout_requests', 'fecha_procesamiento',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('payout_requests', 'referencia_pago',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('payout_requests', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('payout_requests', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('payout_requests', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('payout_requests', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('product_categories', 'product_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('product_categories', 'category_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('product_categories', 'is_primary',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('product_categories', 'sort_order',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('product_categories', 'assigned_by_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('product_categories', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('product_categories', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('product_categories', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('product_categories', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('product_images', 'product_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('product_images', 'filename',
               existing_type=sa.VARCHAR(length=255),
               type_=sa.String(length=255),
               existing_nullable=False)
    op.alter_column('product_images', 'original_filename',
               existing_type=sa.VARCHAR(length=255),
               type_=sa.String(length=255),
               existing_nullable=False)
    op.alter_column('product_images', 'file_path',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=False)
    op.alter_column('product_images', 'file_size',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('product_images', 'mime_type',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('product_images', 'width',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('product_images', 'height',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('product_images', 'order_index',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('product_images', 'resolution',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=False)
    op.alter_column('product_images', 'is_primary',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=True)
    op.alter_column('product_images', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('product_images', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('product_images', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('product_images', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('products', 'sku',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=False)
    op.alter_column('products', 'vendedor_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('products', 'created_by_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('products', 'updated_by_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('products', 'version',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('products', 'name',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=False)
    op.alter_column('products', 'description',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('products', 'status',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Enum('TRANSITO', 'VERIFICADO', 'DISPONIBLE', 'VENDIDO', name='productstatus'),
               existing_nullable=False)
    op.alter_column('products', 'precio_venta',
               existing_type=sa.DECIMAL(precision=10, scale=2),
               type_=sa.DECIMAL(precision=10, scale=2),
               existing_nullable=True)
    op.alter_column('products', 'precio_costo',
               existing_type=sa.DECIMAL(precision=10, scale=2),
               type_=sa.DECIMAL(precision=10, scale=2),
               existing_nullable=True)
    op.alter_column('products', 'comision_mestocker',
               existing_type=sa.DECIMAL(precision=10, scale=2),
               type_=sa.DECIMAL(precision=10, scale=2),
               existing_nullable=True)
    op.alter_column('products', 'peso',
               existing_type=sa.DECIMAL(precision=8, scale=3),
               type_=sa.DECIMAL(precision=8, scale=3),
               existing_nullable=True)
    op.alter_column('products', 'dimensiones',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('products', 'categoria',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('products', 'tags',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('products', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('products', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('products', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('products', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('storages', 'tipo',
               existing_type=sa.VARCHAR(length=8),
               type_=sa.Enum('PEQUENO', 'MEDIANO', 'GRANDE', 'ESPECIAL', name='storagetype'),
               existing_nullable=False)
    op.alter_column('storages', 'capacidad_max',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('storages', 'vendedor_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('storages', 'productos_actuales',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('storages', 'ocupacion_actual',
               existing_type=sa.DECIMAL(precision=5, scale=2),
               type_=sa.DECIMAL(precision=5, scale=2),
               existing_nullable=False)
    op.alter_column('storages', 'ultima_actualizacion',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('storages', 'tarifa_mensual',
               existing_type=sa.DECIMAL(precision=12, scale=2),
               type_=sa.DECIMAL(precision=12, scale=2),
               existing_nullable=True)
    op.alter_column('storages', 'tarifa_por_producto',
               existing_type=sa.DECIMAL(precision=12, scale=2),
               type_=sa.DECIMAL(precision=12, scale=2),
               existing_nullable=True)
    op.alter_column('storages', 'fecha_inicio',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('storages', 'fecha_fin',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('storages', 'renovacion_automatica',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('storages', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('storages', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('storages', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('storages', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('system_settings', 'id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('system_settings', 'key',
               existing_type=sa.VARCHAR(length=255),
               type_=sa.String(length=255),
               existing_nullable=False)
    op.alter_column('system_settings', 'value',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=False)
    op.alter_column('system_settings', 'category',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=False)
    op.alter_column('system_settings', 'data_type',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=False)
    op.alter_column('system_settings', 'description',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=False)
    op.alter_column('system_settings', 'default_value',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('system_settings', 'is_public',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=True)
    op.alter_column('system_settings', 'is_editable',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=True)
    op.alter_column('system_settings', 'last_modified_by',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('system_settings', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('system_settings', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('transactions', 'monto',
               existing_type=sa.DECIMAL(precision=12, scale=2),
               type_=sa.DECIMAL(precision=12, scale=2),
               existing_nullable=False)
    op.alter_column('transactions', 'inventory_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('transactions', 'status',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('transactions', 'fecha_pago',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('transactions', 'referencia_pago',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('transactions', 'metodo_pago',
               existing_type=sa.VARCHAR(length=15),
               type_=sa.Enum('EFECTIVO', 'TARJETA_CREDITO', 'TARJETA_DEBITO', 'PSE', 'NEQUI', 'DAVIPLATA', name='metodopago'),
               existing_nullable=False)
    op.alter_column('transactions', 'estado',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Enum('PENDIENTE', 'PROCESANDO', 'COMPLETADA', 'FALLIDA', 'CANCELADA', name='estadotransaccion'),
               existing_nullable=False)
    op.alter_column('transactions', 'transaction_type',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Enum('VENTA', 'COMISION', 'DEVOLUCION', 'AJUSTE', name='transactiontype'),
               existing_nullable=False)
    op.alter_column('transactions', 'porcentaje_mestocker',
               existing_type=sa.DECIMAL(precision=5, scale=2),
               type_=sa.DECIMAL(precision=5, scale=2),
               existing_nullable=True)
    op.alter_column('transactions', 'monto_vendedor',
               existing_type=sa.DECIMAL(precision=12, scale=2),
               type_=sa.DECIMAL(precision=12, scale=2),
               existing_nullable=True)
    op.alter_column('transactions', 'comprador_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('transactions', 'vendedor_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('transactions', 'product_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('transactions', 'referencia_externa',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('transactions', 'observaciones',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('transactions', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('transactions', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('transactions', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('transactions', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('users', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('users', 'banco',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('users', 'tipo_cuenta',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=True)
    op.alter_column('users', 'numero_cuenta',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('users', 'reset_token',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('users', 'reset_token_expires_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('users', 'reset_attempts',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('users', 'last_reset_request',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('users', 'email',
               existing_type=sa.VARCHAR(length=255),
               type_=sa.String(length=255),
               existing_nullable=False)
    op.alter_column('users', 'password_hash',
               existing_type=sa.VARCHAR(length=255),
               type_=sa.String(length=255),
               existing_nullable=False)
    op.alter_column('users', 'nombre',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('users', 'apellido',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('users', 'user_type',
               existing_type=sa.VARCHAR(length=9),
               type_=sa.Enum('BUYER', 'VENDOR', 'ADMIN', 'SUPERUSER', 'SYSTEM', name='usertype'),
               existing_nullable=False)
    op.alter_column('users', 'vendor_status',
               existing_type=sa.VARCHAR(length=17),
               type_=sa.Enum('DRAFT', 'PENDING_DOCUMENTS', 'PENDING_APPROVAL', 'APPROVED', 'REJECTED', name='vendorstatus'),
               existing_nullable=True)
    op.alter_column('users', 'is_active',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('users', 'is_verified',
               existing_type=sa.BOOLEAN(),
               server_default='false',
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('users', 'cedula',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=True)
    op.alter_column('users', 'telefono',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.String(length=20),
               existing_nullable=True)
    op.alter_column('users', 'ciudad',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('users', 'empresa',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('users', 'direccion',
               existing_type=sa.VARCHAR(length=300),
               type_=sa.String(length=300),
               existing_nullable=True)
    op.alter_column('users', 'email_verified',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('users', 'phone_verified',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=False)
    op.alter_column('users', 'otp_secret',
               existing_type=sa.VARCHAR(length=6),
               type_=sa.String(length=6),
               existing_nullable=True)
    op.alter_column('users', 'otp_expires_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('users', 'otp_attempts',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('users', 'otp_type',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.String(length=10),
               existing_nullable=True)
    op.alter_column('users', 'last_otp_sent',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('users', 'last_login',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('users', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=False)
    op.alter_column('users', 'avatar_url',
               existing_type=sa.VARCHAR(length=500),
               type_=sa.String(length=500),
               existing_nullable=True)
    op.alter_column('users', 'business_name',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('users', 'business_description',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('users', 'website_url',
               existing_type=sa.VARCHAR(length=500),
               type_=sa.String(length=500),
               existing_nullable=True)
    op.alter_column('users', 'social_media_links',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('users', 'business_hours',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('users', 'shipping_policy',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('users', 'return_policy',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('users', 'notification_preferences',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('users', 'bank_name',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=True)
    op.alter_column('users', 'account_holder_name',
               existing_type=sa.VARCHAR(length=200),
               type_=sa.String(length=200),
               existing_nullable=True)
    op.alter_column('users', 'account_number',
               existing_type=sa.VARCHAR(length=50),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('users', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('users', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('vendor_audit_logs', 'vendor_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('vendor_audit_logs', 'admin_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('vendor_audit_logs', 'action_type',
               existing_type=sa.VARCHAR(length=15),
               type_=sa.Enum('APPROVED', 'REJECTED', 'SUSPENDED', 'ACTIVATED', 'PROFILE_UPDATED', 'NOTE_ADDED', 'STATUS_CHANGED', 'BULK_ACTION', name='actiontype'),
               existing_nullable=False)
    op.alter_column('vendor_audit_logs', 'old_values',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('vendor_audit_logs', 'new_values',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=True)
    op.alter_column('vendor_audit_logs', 'description',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('vendor_audit_logs', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('vendor_audit_logs', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('vendor_audit_logs', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('vendor_audit_logs', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('vendor_documents', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'vendor_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'document_type',
               existing_type=sa.VARCHAR(length=20),
               type_=sa.Enum('CEDULA', 'RUT', 'CERTIFICADO_BANCARIO', 'CAMARA_COMERCIO', name='documenttype'),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'file_path',
               existing_type=sa.VARCHAR(),
               type_=sa.String(),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'original_filename',
               existing_type=sa.VARCHAR(),
               type_=sa.String(),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'file_size',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'mime_type',
               existing_type=sa.VARCHAR(),
               type_=sa.String(),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'status',
               existing_type=sa.VARCHAR(length=8),
               type_=sa.Enum('PENDING', 'VERIFIED', 'REJECTED', name='documentstatus'),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'verified_by',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=True)
    op.alter_column('vendor_documents', 'verification_notes',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('vendor_documents', 'uploaded_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'verified_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('vendor_documents', 'updated_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('vendor_notes', 'vendor_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('vendor_notes', 'admin_id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('vendor_notes', 'note_text',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=False)
    op.alter_column('vendor_notes', 'id',
               existing_type=sa.VARCHAR(length=36),
               type_=sa.String(length=36),
               existing_nullable=False)
    op.alter_column('vendor_notes', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('vendor_notes', 'updated_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(),
               existing_nullable=False)
    op.alter_column('vendor_notes', 'deleted_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(),
               existing_nullable=True)
    op.alter_column('webhook_events', 'id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('webhook_events', 'event_id',
               existing_type=sa.VARCHAR(length=100),
               type_=sa.String(length=100),
               existing_nullable=False)
    op.alter_column('webhook_events', 'transaction_id',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('webhook_events', 'event_type',
               existing_type=sa.VARCHAR(length=19),
               type_=sa.Enum('TRANSACTION_UPDATED', 'PAYMENT_CREATED', 'PAYMENT_UPDATED', 'PAYMENT_FAILED', 'PAYMENT_APPROVED', 'PAYMENT_DECLINED', 'PAYMENT_VOIDED', 'PAYMENT_REFUNDED', name='webhookeventtype'),
               existing_nullable=False)
    op.alter_column('webhook_events', 'event_status',
               existing_type=sa.VARCHAR(length=10),
               type_=sa.Enum('RECEIVED', 'PROCESSING', 'PROCESSED', 'FAILED', 'IGNORED', name='webhookeventstatus'),
               existing_nullable=False)
    op.alter_column('webhook_events', 'raw_payload',
               existing_type=sqlite.JSON(),
               type_=sa.JSON(),
               existing_nullable=False)
    op.alter_column('webhook_events', 'signature',
               existing_type=sa.VARCHAR(length=500),
               type_=sa.String(length=500),
               existing_nullable=True)
    op.alter_column('webhook_events', 'signature_validated',
               existing_type=sa.BOOLEAN(),
               type_=sa.Boolean(),
               existing_nullable=True)
    op.alter_column('webhook_events', 'processed_at',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('webhook_events', 'processing_attempts',
               existing_type=sa.INTEGER(),
               type_=sa.Integer(),
               existing_nullable=True)
    op.alter_column('webhook_events', 'processing_error',
               existing_type=sa.TEXT(),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('webhook_events', 'created_at',
               existing_type=sa.DATETIME(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    op.alter_column('webhook_events', 'gateway_timestamp',
               existing_type=sa.DATETIME(),
               type_=sa.DateTime(timezone=True),
               existing_nullable=True)
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.alter_column('webhook_events', 'gateway_timestamp',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('webhook_events', 'created_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('webhook_events', 'processing_error',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('webhook_events', 'processing_attempts',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('webhook_events', 'processed_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('webhook_events', 'signature_validated',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=True)
    op.alter_column('webhook_events', 'signature',
               existing_type=sa.String(length=500),
               type_=sa.VARCHAR(length=500),
               existing_nullable=True)
    op.alter_column('webhook_events', 'raw_payload',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=False)
    op.alter_column('webhook_events', 'event_status',
               existing_type=sa.Enum('RECEIVED', 'PROCESSING', 'PROCESSED', 'FAILED', 'IGNORED', name='webhookeventstatus'),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('webhook_events', 'event_type',
               existing_type=sa.Enum('TRANSACTION_UPDATED', 'PAYMENT_CREATED', 'PAYMENT_UPDATED', 'PAYMENT_FAILED', 'PAYMENT_APPROVED', 'PAYMENT_DECLINED', 'PAYMENT_VOIDED', 'PAYMENT_REFUNDED', name='webhookeventtype'),
               type_=sa.VARCHAR(length=19),
               existing_nullable=False)
    op.alter_column('webhook_events', 'transaction_id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('webhook_events', 'event_id',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('webhook_events', 'id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('vendor_notes', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('vendor_notes', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('vendor_notes', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('vendor_notes', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('vendor_notes', 'note_text',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.alter_column('vendor_notes', 'admin_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('vendor_notes', 'vendor_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'updated_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('vendor_documents', 'verified_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('vendor_documents', 'uploaded_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'verification_notes',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('vendor_documents', 'verified_by',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('vendor_documents', 'status',
               existing_type=sa.Enum('PENDING', 'VERIFIED', 'REJECTED', name='documentstatus'),
               type_=sa.VARCHAR(length=8),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'mime_type',
               existing_type=sa.String(),
               type_=sa.VARCHAR(),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'file_size',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'original_filename',
               existing_type=sa.String(),
               type_=sa.VARCHAR(),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'file_path',
               existing_type=sa.String(),
               type_=sa.VARCHAR(),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'document_type',
               existing_type=sa.Enum('CEDULA', 'RUT', 'CERTIFICADO_BANCARIO', 'CAMARA_COMERCIO', name='documenttype'),
               type_=sa.VARCHAR(length=20),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'vendor_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('vendor_documents', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('vendor_audit_logs', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('vendor_audit_logs', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('vendor_audit_logs', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('vendor_audit_logs', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('vendor_audit_logs', 'description',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('vendor_audit_logs', 'new_values',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('vendor_audit_logs', 'old_values',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('vendor_audit_logs', 'action_type',
               existing_type=sa.Enum('APPROVED', 'REJECTED', 'SUSPENDED', 'ACTIVATED', 'PROFILE_UPDATED', 'NOTE_ADDED', 'STATUS_CHANGED', 'BULK_ACTION', name='actiontype'),
               type_=sa.VARCHAR(length=15),
               existing_nullable=False)
    op.alter_column('vendor_audit_logs', 'admin_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('vendor_audit_logs', 'vendor_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('users', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('users', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('users', 'account_number',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('users', 'account_holder_name',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('users', 'bank_name',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('users', 'notification_preferences',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('users', 'return_policy',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('users', 'shipping_policy',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('users', 'business_hours',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('users', 'social_media_links',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('users', 'website_url',
               existing_type=sa.String(length=500),
               type_=sa.VARCHAR(length=500),
               existing_nullable=True)
    op.alter_column('users', 'business_description',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('users', 'business_name',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('users', 'avatar_url',
               existing_type=sa.String(length=500),
               type_=sa.VARCHAR(length=500),
               existing_nullable=True)
    op.alter_column('users', 'updated_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('users', 'last_login',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('users', 'last_otp_sent',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('users', 'otp_type',
               existing_type=sa.String(length=10),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('users', 'otp_attempts',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('users', 'otp_expires_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('users', 'otp_secret',
               existing_type=sa.String(length=6),
               type_=sa.VARCHAR(length=6),
               existing_nullable=True)
    op.alter_column('users', 'phone_verified',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('users', 'email_verified',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('users', 'direccion',
               existing_type=sa.String(length=300),
               type_=sa.VARCHAR(length=300),
               existing_nullable=True)
    op.alter_column('users', 'empresa',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('users', 'ciudad',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('users', 'telefono',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=True)
    op.alter_column('users', 'cedula',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=True)
    op.alter_column('users', 'is_verified',
               existing_type=sa.Boolean(),
               server_default=sa.text("'false'"),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('users', 'is_active',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('users', 'vendor_status',
               existing_type=sa.Enum('DRAFT', 'PENDING_DOCUMENTS', 'PENDING_APPROVAL', 'APPROVED', 'REJECTED', name='vendorstatus'),
               type_=sa.VARCHAR(length=17),
               existing_nullable=True)
    op.alter_column('users', 'user_type',
               existing_type=sa.Enum('BUYER', 'VENDOR', 'ADMIN', 'SUPERUSER', 'SYSTEM', name='usertype'),
               type_=sa.VARCHAR(length=9),
               existing_nullable=False)
    op.alter_column('users', 'apellido',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('users', 'nombre',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('users', 'password_hash',
               existing_type=sa.String(length=255),
               type_=sa.VARCHAR(length=255),
               existing_nullable=False)
    op.alter_column('users', 'email',
               existing_type=sa.String(length=255),
               type_=sa.VARCHAR(length=255),
               existing_nullable=False)
    op.alter_column('users', 'last_reset_request',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('users', 'reset_attempts',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('users', 'reset_token_expires_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('users', 'reset_token',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('users', 'numero_cuenta',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('users', 'tipo_cuenta',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=True)
    op.alter_column('users', 'banco',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('users', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('transactions', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('transactions', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('transactions', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('transactions', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('transactions', 'observaciones',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('transactions', 'referencia_externa',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('transactions', 'product_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('transactions', 'vendedor_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('transactions', 'comprador_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('transactions', 'monto_vendedor',
               existing_type=sa.DECIMAL(precision=12, scale=2),
               type_=sa.DECIMAL(precision=12, scale=2),
               existing_nullable=True)
    op.alter_column('transactions', 'porcentaje_mestocker',
               existing_type=sa.DECIMAL(precision=5, scale=2),
               type_=sa.DECIMAL(precision=5, scale=2),
               existing_nullable=True)
    op.alter_column('transactions', 'transaction_type',
               existing_type=sa.Enum('VENTA', 'COMISION', 'DEVOLUCION', 'AJUSTE', name='transactiontype'),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('transactions', 'estado',
               existing_type=sa.Enum('PENDIENTE', 'PROCESANDO', 'COMPLETADA', 'FALLIDA', 'CANCELADA', name='estadotransaccion'),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('transactions', 'metodo_pago',
               existing_type=sa.Enum('EFECTIVO', 'TARJETA_CREDITO', 'TARJETA_DEBITO', 'PSE', 'NEQUI', 'DAVIPLATA', name='metodopago'),
               type_=sa.VARCHAR(length=15),
               existing_nullable=False)
    op.alter_column('transactions', 'referencia_pago',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('transactions', 'fecha_pago',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('transactions', 'status',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('transactions', 'inventory_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('transactions', 'monto',
               existing_type=sa.DECIMAL(precision=12, scale=2),
               type_=sa.DECIMAL(precision=12, scale=2),
               existing_nullable=False)
    op.alter_column('system_settings', 'updated_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('system_settings', 'created_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('system_settings', 'last_modified_by',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('system_settings', 'is_editable',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=True)
    op.alter_column('system_settings', 'is_public',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=True)
    op.alter_column('system_settings', 'default_value',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('system_settings', 'description',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.alter_column('system_settings', 'data_type',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=False)
    op.alter_column('system_settings', 'category',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('system_settings', 'value',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.alter_column('system_settings', 'key',
               existing_type=sa.String(length=255),
               type_=sa.VARCHAR(length=255),
               existing_nullable=False)
    op.alter_column('system_settings', 'id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('storages', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('storages', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('storages', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('storages', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('storages', 'renovacion_automatica',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('storages', 'fecha_fin',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('storages', 'fecha_inicio',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('storages', 'tarifa_por_producto',
               existing_type=sa.DECIMAL(precision=12, scale=2),
               type_=sa.DECIMAL(precision=12, scale=2),
               existing_nullable=True)
    op.alter_column('storages', 'tarifa_mensual',
               existing_type=sa.DECIMAL(precision=12, scale=2),
               type_=sa.DECIMAL(precision=12, scale=2),
               existing_nullable=True)
    op.alter_column('storages', 'ultima_actualizacion',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('storages', 'ocupacion_actual',
               existing_type=sa.DECIMAL(precision=5, scale=2),
               type_=sa.DECIMAL(precision=5, scale=2),
               existing_nullable=False)
    op.alter_column('storages', 'productos_actuales',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('storages', 'vendedor_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('storages', 'capacidad_max',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('storages', 'tipo',
               existing_type=sa.Enum('PEQUENO', 'MEDIANO', 'GRANDE', 'ESPECIAL', name='storagetype'),
               type_=sa.VARCHAR(length=8),
               existing_nullable=False)
    op.alter_column('products', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('products', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('products', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('products', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('products', 'tags',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('products', 'categoria',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('products', 'dimensiones',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('products', 'peso',
               existing_type=sa.DECIMAL(precision=8, scale=3),
               type_=sa.DECIMAL(precision=8, scale=3),
               existing_nullable=True)
    op.alter_column('products', 'comision_mestocker',
               existing_type=sa.DECIMAL(precision=10, scale=2),
               type_=sa.DECIMAL(precision=10, scale=2),
               existing_nullable=True)
    op.alter_column('products', 'precio_costo',
               existing_type=sa.DECIMAL(precision=10, scale=2),
               type_=sa.DECIMAL(precision=10, scale=2),
               existing_nullable=True)
    op.alter_column('products', 'precio_venta',
               existing_type=sa.DECIMAL(precision=10, scale=2),
               type_=sa.DECIMAL(precision=10, scale=2),
               existing_nullable=True)
    op.alter_column('products', 'status',
               existing_type=sa.Enum('TRANSITO', 'VERIFICADO', 'DISPONIBLE', 'VENDIDO', name='productstatus'),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('products', 'description',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('products', 'name',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=False)
    op.alter_column('products', 'version',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('products', 'updated_by_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('products', 'created_by_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('products', 'vendedor_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('products', 'sku',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('product_images', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('product_images', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('product_images', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('product_images', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('product_images', 'is_primary',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=True)
    op.alter_column('product_images', 'resolution',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=False)
    op.alter_column('product_images', 'order_index',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('product_images', 'height',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('product_images', 'width',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('product_images', 'mime_type',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('product_images', 'file_size',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('product_images', 'file_path',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.alter_column('product_images', 'original_filename',
               existing_type=sa.String(length=255),
               type_=sa.VARCHAR(length=255),
               existing_nullable=False)
    op.alter_column('product_images', 'filename',
               existing_type=sa.String(length=255),
               type_=sa.VARCHAR(length=255),
               existing_nullable=False)
    op.alter_column('product_images', 'product_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('product_categories', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('product_categories', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('product_categories', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('product_categories', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('product_categories', 'assigned_by_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('product_categories', 'sort_order',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('product_categories', 'is_primary',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('product_categories', 'category_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('product_categories', 'product_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('payout_requests', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payout_requests', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('payout_requests', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('payout_requests', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('payout_requests', 'referencia_pago',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('payout_requests', 'fecha_procesamiento',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payout_requests', 'observaciones',
               existing_type=sa.String(length=500),
               type_=sa.VARCHAR(length=500),
               existing_nullable=True)
    op.alter_column('payout_requests', 'banco',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('payout_requests', 'numero_cuenta',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('payout_requests', 'tipo_cuenta',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=False)
    op.alter_column('payout_requests', 'estado',
               existing_type=sa.Enum('SOLICITADO', 'PROCESANDO', 'PAGADO', 'RECHAZADO', name='estadopayout'),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('payout_requests', 'monto_solicitado',
               existing_type=sa.DECIMAL(precision=12, scale=2),
               type_=sa.DECIMAL(precision=12, scale=2),
               existing_nullable=False)
    op.alter_column('payout_requests', 'vendedor_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('payout_history', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payout_history', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('payout_history', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('payout_history', 'usuario_responsable',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('payout_history', 'observaciones',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('payout_history', 'fecha_cambio',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('payout_history', 'estado_nuevo',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('payout_history', 'estado_anterior',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('payout_history', 'payout_request_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('payout_history', 'id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('payments', 'updated_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payments', 'created_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payments', 'gateway_finalized_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payments', 'gateway_created_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payments', 'gateway_response',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('payments', 'status_message',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('payments', 'status',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('payments', 'customer_data',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('payments', 'customer_email',
               existing_type=sa.String(length=320),
               type_=sa.VARCHAR(length=320),
               existing_nullable=True)
    op.alter_column('payments', 'payment_method',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('payments', 'payment_method_type',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('payments', 'currency',
               existing_type=sa.String(length=3),
               type_=sa.VARCHAR(length=3),
               existing_nullable=False)
    op.alter_column('payments', 'amount_in_cents',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('payments', 'wompi_payment_id',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('payments', 'wompi_transaction_id',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('payments', 'transaction_id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('payments', 'payment_reference',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('payments', 'id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('payment_refunds', 'completed_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payment_refunds', 'processed_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payment_refunds', 'created_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payment_refunds', 'status_message',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('payment_refunds', 'status',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('payment_refunds', 'gateway_response',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('payment_refunds', 'wompi_refund_id',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('payment_refunds', 'reason',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('payment_refunds', 'currency',
               existing_type=sa.String(length=3),
               type_=sa.VARCHAR(length=3),
               existing_nullable=False)
    op.alter_column('payment_refunds', 'refund_amount_in_cents',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('payment_refunds', 'transaction_id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('payment_refunds', 'payment_id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('payment_refunds', 'refund_reference',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('payment_refunds', 'id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False,
               autoincrement=True)
    op.add_column('payment_methods', sa.Column('id_new', sa.VARCHAR(length=36), nullable=True))
    op.add_column('payment_methods', sa.Column('buyer_id_new', sa.VARCHAR(length=36), nullable=True))
    op.alter_column('payment_methods', 'updated_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payment_methods', 'created_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payment_methods', 'gateway_customer_id',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('payment_methods', 'gateway_token',
               existing_type=sa.String(length=500),
               type_=sa.VARCHAR(length=500),
               existing_nullable=True)
    op.alter_column('payment_methods', 'pse_user_dni',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('payment_methods', 'pse_user_type',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=True)
    op.alter_column('payment_methods', 'pse_bank_name',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('payment_methods', 'pse_bank_code',
               existing_type=sa.String(length=10),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('payment_methods', 'card_holder_name',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('payment_methods', 'card_exp_year',
               existing_type=sa.String(length=4),
               type_=sa.VARCHAR(length=4),
               existing_nullable=True)
    op.alter_column('payment_methods', 'card_exp_month',
               existing_type=sa.String(length=2),
               type_=sa.VARCHAR(length=2),
               existing_nullable=True)
    op.alter_column('payment_methods', 'card_last_four',
               existing_type=sa.String(length=4),
               type_=sa.VARCHAR(length=4),
               existing_nullable=True)
    op.alter_column('payment_methods', 'card_brand',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('payment_methods', 'is_active',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=True)
    op.alter_column('payment_methods', 'is_default',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=True)
    op.alter_column('payment_methods', 'method_type',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('payment_methods', 'buyer_id',
               existing_type=sa.String(length=36),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('payment_methods', 'id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('payment_intents', 'completed_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payment_intents', 'updated_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payment_intents', 'created_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payment_intents', 'expires_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('payment_intents', 'status',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('payment_intents', 'wompi_checkout_url',
               existing_type=sa.String(length=1000),
               type_=sa.VARCHAR(length=1000),
               existing_nullable=True)
    op.alter_column('payment_intents', 'wompi_payment_link_id',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('payment_intents', 'redirect_url',
               existing_type=sa.String(length=1000),
               type_=sa.VARCHAR(length=1000),
               existing_nullable=True)
    op.alter_column('payment_intents', 'payment_method_types',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('payment_intents', 'billing_data',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('payment_intents', 'customer_email',
               existing_type=sa.String(length=320),
               type_=sa.VARCHAR(length=320),
               existing_nullable=False)
    op.alter_column('payment_intents', 'currency',
               existing_type=sa.String(length=3),
               type_=sa.VARCHAR(length=3),
               existing_nullable=False)
    op.alter_column('payment_intents', 'amount_in_cents',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('payment_intents', 'order_id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('payment_intents', 'intent_reference',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('payment_intents', 'id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False,
               autoincrement=True)
    op.add_column('orders', sa.Column('vendor_id_new', sa.VARCHAR(length=36), nullable=True))
    op.add_column('orders', sa.Column('id_new', sa.VARCHAR(length=36), nullable=True))
    op.add_column('orders', sa.Column('buyer_id_new', sa.VARCHAR(length=36), nullable=True))
    op.alter_column('orders', 'notes',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('orders', 'shipping_country',
               existing_type=sa.String(length=2),
               type_=sa.VARCHAR(length=2),
               existing_nullable=False)
    op.alter_column('orders', 'shipping_postal_code',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=True)
    op.alter_column('orders', 'shipping_state',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('orders', 'shipping_city',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('orders', 'shipping_address',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.alter_column('orders', 'shipping_email',
               existing_type=sa.String(length=255),
               type_=sa.VARCHAR(length=255),
               existing_nullable=True)
    op.alter_column('orders', 'shipping_phone',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=False)
    op.alter_column('orders', 'shipping_name',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=False)
    op.alter_column('orders', 'delivered_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('orders', 'shipped_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('orders', 'confirmed_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('orders', 'updated_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('orders', 'created_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('orders', 'status',
               existing_type=sa.Enum('PENDING', 'CONFIRMED', 'PROCESSING', 'SHIPPED', 'DELIVERED', 'CANCELLED', 'REFUNDED', name='orderstatus'),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('orders', 'total_amount',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=False)
    op.alter_column('orders', 'discount_amount',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=False)
    op.alter_column('orders', 'shipping_cost',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=False)
    op.alter_column('orders', 'tax_amount',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=False)
    op.alter_column('orders', 'subtotal',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=False)
    op.alter_column('orders', 'buyer_id',
               existing_type=sa.String(length=36),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('orders', 'order_number',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('orders', 'id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False,
               autoincrement=True)
    op.add_column('order_transactions', sa.Column('id_new', sa.VARCHAR(length=36), nullable=True))
    op.add_column('order_transactions', sa.Column('payment_method_id_new', sa.VARCHAR(length=36), nullable=True))
    op.add_column('order_transactions', sa.Column('order_id_new', sa.VARCHAR(length=36), nullable=True))
    op.alter_column('order_transactions', 'failure_code',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('order_transactions', 'failure_reason',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('order_transactions', 'confirmed_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('order_transactions', 'processed_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('order_transactions', 'created_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('order_transactions', 'gateway_response',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('order_transactions', 'gateway_reference',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('order_transactions', 'gateway_transaction_id',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('order_transactions', 'gateway',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('order_transactions', 'payment_method_id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('order_transactions', 'payment_method_type',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('order_transactions', 'status',
               existing_type=sa.Enum('PENDING', 'PROCESSING', 'APPROVED', 'DECLINED', 'ERROR', 'CANCELLED', name='paymentstatus'),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('order_transactions', 'currency',
               existing_type=sa.String(length=3),
               type_=sa.VARCHAR(length=3),
               existing_nullable=False)
    op.alter_column('order_transactions', 'amount',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=False)
    op.alter_column('order_transactions', 'order_id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('order_transactions', 'transaction_reference',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('order_transactions', 'id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False,
               autoincrement=True)
    op.add_column('order_items', sa.Column('vendor_id_new', sa.VARCHAR(length=36), nullable=True))
    op.add_column('order_items', sa.Column('product_id_new', sa.VARCHAR(length=36), nullable=True))
    op.add_column('order_items', sa.Column('id_new', sa.VARCHAR(length=36), nullable=True))
    op.add_column('order_items', sa.Column('order_id_new', sa.VARCHAR(length=36), nullable=True))
    op.alter_column('order_items', 'created_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('order_items', 'variant_attributes',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('order_items', 'total_price',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=False)
    op.alter_column('order_items', 'quantity',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('order_items', 'unit_price',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=False)
    op.alter_column('order_items', 'product_image_url',
               existing_type=sa.String(length=1000),
               type_=sa.VARCHAR(length=1000),
               existing_nullable=True)
    op.alter_column('order_items', 'product_sku',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('order_items', 'product_name',
               existing_type=sa.String(length=500),
               type_=sa.VARCHAR(length=500),
               existing_nullable=False)
    op.alter_column('order_items', 'product_id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('order_items', 'order_id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('order_items', 'id',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False,
               autoincrement=True)
    op.alter_column('movimientos_stock', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('movimientos_stock', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'ubicacion_destino',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('movimientos_stock', 'ubicacion_origen',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('movimientos_stock', 'lote',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('movimientos_stock', 'referencia_externa',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('movimientos_stock', 'fecha_movimiento',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'observaciones',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('movimientos_stock', 'user_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('movimientos_stock', 'cantidad_nueva',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'cantidad_anterior',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'tipo_movimiento',
               existing_type=sa.Enum('INGRESO', 'SALIDA', 'AJUSTE_POSITIVO', 'AJUSTE_NEGATIVO', 'TRANSFERENCIA', 'DEVOLUCION', 'MERMA', 'RESERVA', 'LIBERACION', name='tipomovimiento'),
               type_=sa.VARCHAR(length=15),
               existing_nullable=False)
    op.alter_column('movimientos_stock', 'inventory_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'action_timestamp',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'notes',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'batch_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'location_to',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'location_from',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'session_id',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'user_agent',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'ip_address',
               existing_type=sa.String(length=45),
               type_=sa.VARCHAR(length=45),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'new_data',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'previous_data',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('movement_tracker', 'action_type',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'user_name',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'user_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('movement_tracker', 'movement_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('inventory_audits', 'updated_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'created_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'notas',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'valor_discrepancias',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'discrepancias_encontradas',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'total_items_auditados',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'discrepancies_found',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'audit_type',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'auditor_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('inventory_audits', 'fecha_fin',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'fecha_inicio',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'status',
               existing_type=sa.Enum('INICIADA', 'EN_PROCESO', 'COMPLETADA', 'RECONCILIADA', name='auditstatus'),
               type_=sa.VARCHAR(length=12),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'descripcion',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('inventory_audits', 'nombre',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=False)
    op.alter_column('inventory_audits', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('inventory_audit_items', 'reconciliado',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'notas_conteo',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'fecha_conteo',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'valor_discrepancia',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'diferencia_cantidad',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'tipo_discrepancia',
               existing_type=sa.Enum('FALTANTE', 'SOBRANTE', 'UBICACION_INCORRECTA', 'CONDICION_DIFERENTE', name='discrepancytype'),
               type_=sa.VARCHAR(length=20),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'tiene_discrepancia',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'conteo_completado',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'condicion_fisica',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'ubicacion_fisica',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'cantidad_fisica',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'condicion_sistema',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'ubicacion_sistema',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('inventory_audit_items', 'cantidad_sistema',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('inventory_audit_items', 'inventory_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('inventory_audit_items', 'audit_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('inventory_audit_items', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('inventory', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('inventory', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('inventory', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('inventory', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('inventory', 'fecha_ultimo_movimiento',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('inventory', 'fecha_ingreso',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('inventory', 'storage_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('inventory', 'updated_by_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('inventory', 'cantidad_reservada',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('inventory', 'cantidad',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('inventory', 'posicion',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=False)
    op.alter_column('inventory', 'estante',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=False)
    op.alter_column('inventory', 'zona',
               existing_type=sa.String(length=10),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('inventory', 'notas_almacen',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('inventory', 'condicion_producto',
               existing_type=sa.Enum('NUEVO', 'USADO_EXCELENTE', 'USADO_BUENO', 'USADO_REGULAR', 'DAÑADO', name='condicionproducto'),
               type_=sa.VARCHAR(length=15),
               existing_nullable=False)
    op.alter_column('inventory', 'status',
               existing_type=sa.Enum('DISPONIBLE', 'RESERVADO', 'EN_PICKING', 'DESPACHADO', name='inventorystatus'),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('inventory', 'product_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'verification_attempts',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'processing_completed_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'processing_started_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'quality_issues',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'quality_score',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'verification_notes',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'notes',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'delay_reason',
               existing_type=sa.Enum('TRANSPORT', 'CUSTOMS', 'DOCUMENTATION', 'VENDOR_DELAY', 'QUALITY_ISSUES', 'CAPACITY', 'OTHER', name='delayreason'),
               type_=sa.VARCHAR(length=14),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'is_delayed',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'carrier',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'tracking_number',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'deadline',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'assigned_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'assigned_to',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'priority',
               existing_type=sa.Enum('LOW', 'NORMAL', 'HIGH', 'CRITICAL', 'EXPEDITED', name='queuepriority'),
               type_=sa.VARCHAR(length=9),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'verification_status',
               existing_type=sa.Enum('PENDING', 'ASSIGNED', 'IN_PROGRESS', 'QUALITY_CHECK', 'APPROVED', 'REJECTED', 'ON_HOLD', 'COMPLETED', name='verificationstatus'),
               type_=sa.VARCHAR(length=13),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'actual_arrival',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'expected_arrival',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('incoming_product_queue', 'vendor_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('incoming_product_queue', 'product_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('incidentes_inventario', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('incidentes_inventario', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('incidentes_inventario', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('incidentes_inventario', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('incidentes_inventario', 'fecha_incidente',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('incidentes_inventario', 'reportado_por',
               existing_type=sa.String(),
               type_=sa.VARCHAR(),
               existing_nullable=False)
    op.alter_column('incidentes_inventario', 'descripcion',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.alter_column('incidentes_inventario', 'estado',
               existing_type=sa.Enum('REPORTADO', 'EN_INVESTIGACION', 'RESUELTO', 'CERRADO', name='estadoincidente'),
               type_=sa.VARCHAR(length=16),
               existing_nullable=True)
    op.alter_column('incidentes_inventario', 'tipo_incidente',
               existing_type=sa.Enum('PERDIDO', 'DAÑADO', name='tipoincidente'),
               type_=sa.VARCHAR(length=7),
               existing_nullable=False)
    op.alter_column('incidentes_inventario', 'inventory_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'completed_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'updated_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'created_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'notes',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'download_count',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'expiry_date',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'generation_time_seconds',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'report_config',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'analysis_data',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'status',
               existing_type=sa.Enum('GENERATING', 'COMPLETED', 'FAILED', 'EXPIRED', name='reportstatus'),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'file_size',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'file_format',
               existing_type=sa.Enum('PDF', 'EXCEL', 'CSV', 'JSON', name='exportformat'),
               type_=sa.VARCHAR(length=5),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'file_path',
               existing_type=sa.String(length=500),
               type_=sa.VARCHAR(length=500),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'items_analyzed',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'accuracy_percentage',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'financial_impact',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'total_adjustments',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'total_discrepancies',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'date_range_end',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'date_range_start',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'generated_by_name',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'generated_by_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'description',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('discrepancy_reports', 'report_name',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'report_type',
               existing_type=sa.Enum('DISCREPANCIES', 'ADJUSTMENTS', 'ACCURACY', 'FINANCIAL_IMPACT', 'LOCATION_ANALYSIS', 'CATEGORY_ANALYSIS', 'TREND_ANALYSIS', 'COMPREHENSIVE', name='reporttype'),
               type_=sa.VARCHAR(length=17),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'audit_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('discrepancy_reports', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('commissions', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('commissions', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('commissions', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('commissions', 'approved_by_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('commissions', 'resolved_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('commissions', 'disputed_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('commissions', 'paid_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('commissions', 'approved_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('commissions', 'calculated_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('commissions', 'admin_notes',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('commissions', 'notes',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('commissions', 'calculation_method',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('commissions', 'currency',
               existing_type=sa.String(length=3),
               type_=sa.VARCHAR(length=3),
               existing_nullable=False)
    op.alter_column('commissions', 'status',
               existing_type=sa.Enum('PENDING', 'APPROVED', 'PAID', 'DISPUTED', 'REFUNDED', 'CANCELLED', name='commissionstatus'),
               type_=sa.VARCHAR(length=9),
               existing_nullable=False)
    op.alter_column('commissions', 'commission_type',
               existing_type=sa.Enum('STANDARD', 'PREMIUM', 'PROMOTIONAL', 'CATEGORY_BASED', name='commissiontype'),
               type_=sa.VARCHAR(length=14),
               existing_nullable=False)
    op.alter_column('commissions', 'platform_amount',
               existing_type=sa.DECIMAL(precision=10, scale=2),
               type_=sa.DECIMAL(precision=10, scale=2),
               existing_nullable=False)
    op.alter_column('commissions', 'vendor_amount',
               existing_type=sa.DECIMAL(precision=10, scale=2),
               type_=sa.DECIMAL(precision=10, scale=2),
               existing_nullable=False)
    op.alter_column('commissions', 'commission_amount',
               existing_type=sa.DECIMAL(precision=10, scale=2),
               type_=sa.DECIMAL(precision=10, scale=2),
               existing_nullable=False)
    op.alter_column('commissions', 'commission_rate',
               existing_type=sa.DECIMAL(precision=5, scale=4),
               type_=sa.DECIMAL(precision=5, scale=4),
               existing_nullable=False)
    op.alter_column('commissions', 'order_amount',
               existing_type=sa.DECIMAL(precision=10, scale=2),
               type_=sa.DECIMAL(precision=10, scale=2),
               existing_nullable=False)
    op.alter_column('commissions', 'transaction_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('commissions', 'vendor_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('commissions', 'order_id',
               existing_type=sa.String(length=36),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('commissions', 'commission_number',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('commissions', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('commission_disputes', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'respuesta_admin',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('commission_disputes', 'estado',
               existing_type=sa.Enum('ABIERTO', 'EN_REVISION', 'RESUELTO', 'RECHAZADO', name='estadodispute'),
               type_=sa.VARCHAR(length=11),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'descripcion',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'motivo',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'usuario_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('commission_disputes', 'transaction_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('categories', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('categories', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('categories', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('categories', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('categories', 'product_count',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('categories', 'display_config',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('categories', 'banner_url',
               existing_type=sa.String(length=500),
               type_=sa.VARCHAR(length=500),
               existing_nullable=True)
    op.alter_column('categories', 'icon_url',
               existing_type=sa.String(length=500),
               type_=sa.VARCHAR(length=500),
               existing_nullable=True)
    op.alter_column('categories', 'meta_keywords',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('categories', 'meta_description',
               existing_type=sa.String(length=500),
               type_=sa.VARCHAR(length=500),
               existing_nullable=True)
    op.alter_column('categories', 'meta_title',
               existing_type=sa.String(length=255),
               type_=sa.VARCHAR(length=255),
               existing_nullable=True)
    op.alter_column('categories', 'status',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=False)
    op.alter_column('categories', 'is_active',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('categories', 'sort_order',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('categories', 'level',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('categories', 'path',
               existing_type=sa.String(length=1000),
               type_=sa.VARCHAR(length=1000),
               existing_nullable=False)
    op.alter_column('categories', 'parent_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('categories', 'description',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('categories', 'slug',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=False)
    op.alter_column('categories', 'name',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=False)
    op.alter_column('admin_user_permissions', 'is_active',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('admin_user_permissions', 'expires_at',
               existing_type=sa.DateTime(timezone=True),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('admin_user_permissions', 'granted_at',
               existing_type=sa.DateTime(timezone=True),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('admin_user_permissions', 'granted_by_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('admin_user_permissions', 'permission_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('admin_user_permissions', 'user_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('admin_permissions', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'audit_required',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'compliance_requirements',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('admin_permissions', 'risk_level',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'tags',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('admin_permissions', 'category',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('admin_permissions', 'restrictions',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('admin_permissions', 'conditions',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('admin_permissions', 'is_delegatable',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'is_inheritable',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'is_system_permission',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'requires_approval',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'requires_mfa',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'required_clearance_level',
               existing_type=sa.Integer(),
               type_=sa.INTEGER(),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'scope',
               existing_type=sa.Enum('SYSTEM', 'GLOBAL', 'DEPARTMENT', 'TEAM', 'USER', 'READ_ONLY', name='permissionscope'),
               type_=sa.VARCHAR(length=10),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'action',
               existing_type=sa.Enum('CREATE', 'READ', 'UPDATE', 'DELETE', 'APPROVE', 'REJECT', 'MANAGE', 'AUDIT', 'EXPORT', 'IMPORT', 'CONFIGURE', 'MONITOR', name='permissionaction'),
               type_=sa.VARCHAR(length=9),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'resource_type',
               existing_type=sa.Enum('USERS', 'VENDORS', 'ORDERS', 'PRODUCTS', 'INVENTORY', 'TRANSACTIONS', 'COMMISSIONS', 'REPORTS', 'SETTINGS', 'AUDIT_LOGS', 'NOTIFICATIONS', 'PAYMENTS', 'STORAGE', 'ANALYTICS', name='resourcetype'),
               type_=sa.VARCHAR(length=13),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'description',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('admin_permissions', 'display_name',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'name',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('admin_permissions', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'deleted_at',
               existing_type=sa.DateTime(),
               type_=sa.DATETIME(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'updated_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'created_at',
               existing_type=sa.DateTime(),
               server_default=sa.text('(CURRENT_TIMESTAMP)'),
               type_=sa.DATETIME(),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'alert_level',
               existing_type=sa.String(length=20),
               type_=sa.VARCHAR(length=20),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'alert_sent',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'correlation_id',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'custom_fields',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'tags',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'retention_policy',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'compliance_tags',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'is_suspicious',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'requires_review',
               existing_type=sa.Boolean(),
               type_=sa.BOOLEAN(),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'error_stack_trace',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'error_message',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'error_code',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'memory_usage_mb',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'cpu_usage_percent',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'execution_time_ms',
               existing_type=sa.Float(),
               type_=sa.FLOAT(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'timezone',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'city',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'region',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'country_code',
               existing_type=sa.String(length=2),
               type_=sa.VARCHAR(length=2),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'device_fingerprint',
               existing_type=sa.String(length=255),
               type_=sa.VARCHAR(length=255),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'session_id',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'user_agent',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'ip_address',
               existing_type=sa.String(length=45),
               type_=sa.VARCHAR(length=45),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'response_data',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'request_data',
               existing_type=sa.JSON(),
               type_=sqlite.JSON(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'http_method',
               existing_type=sa.String(length=10),
               type_=sa.VARCHAR(length=10),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'endpoint',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'risk_level',
               existing_type=sa.Enum('LOW', 'MEDIUM', 'HIGH', 'CRITICAL', 'EMERGENCY', name='risklevel'),
               type_=sa.VARCHAR(length=9),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'result',
               existing_type=sa.Enum('SUCCESS', 'FAILURE', 'PARTIAL', 'BLOCKED', 'PENDING', 'CANCELLED', 'TIMEOUT', name='actionresult'),
               type_=sa.VARCHAR(length=9),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'target_identifier',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'target_id',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'target_type',
               existing_type=sa.String(length=50),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'action_description',
               existing_type=sa.Text(),
               type_=sa.TEXT(),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'action_name',
               existing_type=sa.String(length=100),
               type_=sa.VARCHAR(length=100),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'action_type',
               existing_type=sa.Enum('AUTHENTICATION', 'USER_MANAGEMENT', 'VENDOR_MANAGEMENT', 'FINANCIAL', 'SYSTEM_CONFIG', 'DATA_EXPORT', 'SECURITY', 'AUDIT', 'MONITORING', 'EMERGENCY', name='adminactiontype'),
               type_=sa.VARCHAR(length=17),
               existing_nullable=False)
    op.alter_column('admin_activity_logs', 'admin_full_name',
               existing_type=sa.String(length=200),
               type_=sa.VARCHAR(length=200),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'admin_email',
               existing_type=sa.String(length=255),
               type_=sa.VARCHAR(length=255),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'admin_user_id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=True)
    op.alter_column('admin_activity_logs', 'id',
               existing_type=sa.String(length=36),
               type_=sa.VARCHAR(length=36),
               existing_nullable=False)
    # ### end Alembic commands ###
